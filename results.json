{
  "metadata": {
    "code_folder": "samples",
    "semantic_threshold": 0.6,
    "dynamic_runs": 2,
    "enable_bci": false,
    "timestamp": "2026-02-21 10:35:21",
    "execution_time_seconds": 2.78
  },
  "static_analysis": {
    "total_files": 9,
    "files": [
      {
        "path": "samples\\buggy_critical.py",
        "num_functions": 2,
        "functions": [
          {
            "name": "delete_system",
            "start": 2,
            "end": 4,
            "code": "def delete_system():\n    # CRITICAL: Deleting system files\n    os.system(\"rm -rf /\")",
            "features": {
              "num_statements": 2,
              "num_branches": 0
            }
          },
          {
            "name": "hardcoded_secret",
            "start": 6,
            "end": 9,
            "code": "def hardcoded_secret():\n    # CRITICAL: Hardcoded API key\n    api_key = \"sk-1234567890abcdef1234567890abcdef\"\n    print(api_key)",
            "features": {
              "num_statements": 3,
              "num_branches": 0
            }
          }
        ]
      },
      {
        "path": "samples\\exact_clone.py",
        "num_functions": 1,
        "functions": [
          {
            "name": "add",
            "start": 1,
            "end": 3,
            "code": "def add(a, b):\n    \"\"\"Simple add\"\"\"\n    return a + b",
            "features": {
              "num_statements": 3,
              "num_branches": 0
            }
          }
        ]
      },
      {
        "path": "samples\\math_utils.py",
        "num_functions": 2,
        "functions": [
          {
            "name": "calculate_factorial",
            "start": 0,
            "end": 8,
            "code": "def calculate_factorial(n):\n    if n < 0:\n        return None\n    if n == 0:\n        return 1\n    result = 1\n    for i in range(1, n + 1):\n        result *= i\n    return result",
            "features": {
              "num_statements": 9,
              "num_branches": 3
            }
          },
          {
            "name": "calculate_fibonacci",
            "start": 10,
            "end": 18,
            "code": "def calculate_fibonacci(n):\n    if n <= 0:\n        return []\n    if n == 1:\n        return [0]\n    sequence = [0, 1]\n    while len(sequence) < n:\n        sequence.append(sequence[-1] + sequence[-2])\n    return sequence",
            "features": {
              "num_statements": 9,
              "num_branches": 3
            }
          }
        ]
      },
      {
        "path": "samples\\math_utils_clone.py",
        "num_functions": 2,
        "functions": [
          {
            "name": "compute_factorial",
            "start": 0,
            "end": 10,
            "code": "def compute_factorial(number):\n    # This function computes factorial\n    # It is semantically identical to calculate_factorial in math_utils.py\n    if number < 0:\n        return None\n    if number == 0:\n        return 1\n    res = 1\n    for x in range(1, number + 1):\n        res = res * x\n    return res",
            "features": {
              "num_statements": 9,
              "num_branches": 3
            }
          },
          {
            "name": "get_fib_sequence",
            "start": 12,
            "end": 23,
            "code": "def get_fib_sequence(count):\n    # This computes fibonacci sequence\n    # Semantically similar to calculate_fibonacci\n    if count <= 0:\n        return []\n    if count == 1:\n        return [0]\n    seq = [0, 1]\n    while len(seq) < count:\n        next_val = seq[-1] + seq[-2]\n        seq.append(next_val)\n    return seq",
            "features": {
              "num_statements": 10,
              "num_branches": 3
            }
          }
        ]
      },
      {
        "path": "samples\\sample_buggy.py",
        "num_functions": 1,
        "functions": [
          {
            "name": "fixed_code",
            "start": 1,
            "end": 3,
            "code": "def fixed_code():\n    # The AI has analyzed the logic error...\n    pass",
            "features": {
              "num_statements": 2,
              "num_branches": 0
            }
          }
        ]
      },
      {
        "path": "samples\\sample_safe_1.py",
        "num_functions": 1,
        "functions": [
          {
            "name": "add",
            "start": 1,
            "end": 3,
            "code": "def add(a, b):\n    \"\"\"Simple add\"\"\"\n    return a + b",
            "features": {
              "num_statements": 3,
              "num_branches": 0
            }
          }
        ]
      },
      {
        "path": "samples\\sample_safe_2.py",
        "num_functions": 2,
        "functions": [
          {
            "name": "sum_two",
            "start": 1,
            "end": 2,
            "code": "def sum_two(x, y):\n    return x + y",
            "features": {
              "num_statements": 2,
              "num_branches": 0
            }
          },
          {
            "name": "maybe_throw",
            "start": 4,
            "end": 9,
            "code": "def maybe_throw(s):\n    # very rarely throws intentionally if RANDOM_INPUT contains 'Z'\n    import os\n    if 'Z' in os.environ.get(\"RANDOM_INPUT\",\"\"):\n        raise ValueError(\"Intentional rare error\")\n    return True",
            "features": {
              "num_statements": 5,
              "num_branches": 1
            }
          }
        ]
      },
      {
        "path": "samples\\test_vuln.py",
        "num_functions": 3,
        "functions": [
          {
            "name": "dangerous_function",
            "start": 3,
            "end": 5,
            "code": "def dangerous_function(user_input):\n    result = eval(user_input)  # Security risk\n    return result",
            "features": {
              "num_statements": 3,
              "num_branches": 0
            }
          },
          {
            "name": "bad_error_handling",
            "start": 7,
            "end": 8,
            "code": "def bad_error_handling():\n    try:\n        x = 1 / 0\n    except:\n        pass",
            "features": {
              "num_statements": 4,
              "num_branches": 1
            }
          },
          {
            "name": "safe_function",
            "start": 13,
            "end": 14,
            "code": "def safe_function():\n    return \"Hello, World!\"",
            "features": {
              "num_statements": 2,
              "num_branches": 0
            }
          }
        ]
      },
      {
        "path": "samples\\test_vuln_fixed.py",
        "num_functions": 3,
        "functions": [
          {
            "name": "dangerous_function",
            "start": 4,
            "end": 6,
            "code": "def dangerous_function(user_input):\n    result = ast.literal_eval(user_input)  # Security risk\n    return result",
            "features": {
              "num_statements": 3,
              "num_branches": 0
            }
          },
          {
            "name": "bad_error_handling",
            "start": 8,
            "end": 9,
            "code": "def bad_error_handling():\n    try:\n        x = 1 / 0\n    except:\n        pass",
            "features": {
              "num_statements": 4,
              "num_branches": 1
            }
          },
          {
            "name": "safe_function",
            "start": 14,
            "end": 15,
            "code": "def safe_function():\n    return \"Hello, World!\"",
            "features": {
              "num_statements": 2,
              "num_branches": 0
            }
          }
        ]
      }
    ]
  },
  "semantic_analysis": {
    "total_pairs": 4,
    "pairs": [
      {
        "i": 2,
        "j": 8,
        "score": 1.0,
        "a": {
          "file": "samples\\exact_clone.py",
          "func_name": "add",
          "code": "def add(a, b):\n    \"\"\"Simple add\"\"\"\n    return a + b",
          "features": {
            "num_statements": 3,
            "num_branches": 0
          }
        },
        "b": {
          "file": "samples\\sample_safe_1.py",
          "func_name": "add",
          "code": "def add(a, b):\n    \"\"\"Simple add\"\"\"\n    return a + b",
          "features": {
            "num_statements": 3,
            "num_branches": 0
          }
        }
      },
      {
        "i": 12,
        "j": 15,
        "score": 1.0,
        "a": {
          "file": "samples\\test_vuln.py",
          "func_name": "bad_error_handling",
          "code": "def bad_error_handling():\n    try:\n        x = 1 / 0\n    except:\n        pass",
          "features": {
            "num_statements": 4,
            "num_branches": 1
          }
        },
        "b": {
          "file": "samples\\test_vuln_fixed.py",
          "func_name": "bad_error_handling",
          "code": "def bad_error_handling():\n    try:\n        x = 1 / 0\n    except:\n        pass",
          "features": {
            "num_statements": 4,
            "num_branches": 1
          }
        }
      },
      {
        "i": 13,
        "j": 16,
        "score": 1.0,
        "a": {
          "file": "samples\\test_vuln.py",
          "func_name": "safe_function",
          "code": "def safe_function():\n    return \"Hello, World!\"",
          "features": {
            "num_statements": 2,
            "num_branches": 0
          }
        },
        "b": {
          "file": "samples\\test_vuln_fixed.py",
          "func_name": "safe_function",
          "code": "def safe_function():\n    return \"Hello, World!\"",
          "features": {
            "num_statements": 2,
            "num_branches": 0
          }
        }
      },
      {
        "i": 11,
        "j": 14,
        "score": 0.7,
        "a": {
          "file": "samples\\test_vuln.py",
          "func_name": "dangerous_function",
          "code": "def dangerous_function(user_input):\n    result = eval(user_input)  # Security risk\n    return result",
          "features": {
            "num_statements": 3,
            "num_branches": 0
          }
        },
        "b": {
          "file": "samples\\test_vuln_fixed.py",
          "func_name": "dangerous_function",
          "code": "def dangerous_function(user_input):\n    result = ast.literal_eval(user_input)  # Security risk\n    return result",
          "features": {
            "num_statements": 3,
            "num_branches": 0
          }
        }
      }
    ]
  },
  "dynamic_testing": {
    "total_files_tested": 9,
    "results": [
      {
        "path": "samples\\buggy_critical.py",
        "runs": 2,
        "anomalies": []
      },
      {
        "path": "samples\\exact_clone.py",
        "runs": 2,
        "anomalies": []
      },
      {
        "path": "samples\\math_utils.py",
        "runs": 2,
        "anomalies": []
      },
      {
        "path": "samples\\math_utils_clone.py",
        "runs": 2,
        "anomalies": []
      },
      {
        "path": "samples\\sample_buggy.py",
        "runs": 2,
        "anomalies": []
      },
      {
        "path": "samples\\sample_safe_1.py",
        "runs": 2,
        "anomalies": []
      },
      {
        "path": "samples\\sample_safe_2.py",
        "runs": 2,
        "anomalies": []
      },
      {
        "path": "samples\\test_vuln.py",
        "runs": 2,
        "anomalies": []
      },
      {
        "path": "samples\\test_vuln_fixed.py",
        "runs": 2,
        "anomalies": []
      }
    ]
  },
  "bci_tracing": {
    "total_files_traced": 0,
    "results": []
  },
  "fusion_reports": {
    "total_reports": 4,
    "reports": [
      {
        "file_a": "samples\\exact_clone.py",
        "func_a": "add",
        "file_b": "samples\\sample_safe_1.py",
        "func_b": "add",
        "struct_sim": 0.5,
        "semantic_sim": 1.0,
        "dynamic_anomaly": false,
        "fusion_score": 1.0,
        "score_components": {
          "structural": 0.5,
          "semantic": 1.0,
          "dynamic": false,
          "line_similarity": 1.0,
          "token_similarity": 1.0,
          "clone_type": "Type 1 (Exact)",
          "weighted_structural": 0.15,
          "weighted_semantic": 0.5,
          "weighted_dynamic": 0.0
        },
        "explanation": "Clone detected: Classified as Type 1 (Exact), High syntactic match (1.00)"
      },
      {
        "file_a": "samples\\test_vuln.py",
        "func_a": "bad_error_handling",
        "file_b": "samples\\test_vuln_fixed.py",
        "func_b": "bad_error_handling",
        "struct_sim": 1.0,
        "semantic_sim": 1.0,
        "dynamic_anomaly": false,
        "fusion_score": 1.0,
        "score_components": {
          "structural": 1.0,
          "semantic": 1.0,
          "dynamic": false,
          "line_similarity": 1.0,
          "token_similarity": 1.0,
          "clone_type": "Type 1 (Exact)",
          "weighted_structural": 0.3,
          "weighted_semantic": 0.5,
          "weighted_dynamic": 0.0
        },
        "explanation": "Clone detected: Classified as Type 1 (Exact), High syntactic match (1.00)"
      },
      {
        "file_a": "samples\\test_vuln.py",
        "func_a": "safe_function",
        "file_b": "samples\\test_vuln_fixed.py",
        "func_b": "safe_function",
        "struct_sim": 0.5,
        "semantic_sim": 1.0,
        "dynamic_anomaly": false,
        "fusion_score": 1.0,
        "score_components": {
          "structural": 0.5,
          "semantic": 1.0,
          "dynamic": false,
          "line_similarity": 1.0,
          "token_similarity": 1.0,
          "clone_type": "Type 1 (Exact)",
          "weighted_structural": 0.15,
          "weighted_semantic": 0.5,
          "weighted_dynamic": 0.0
        },
        "explanation": "Clone detected: Classified as Type 1 (Exact), High syntactic match (1.00)"
      },
      {
        "file_a": "samples\\test_vuln.py",
        "func_a": "dangerous_function",
        "file_b": "samples\\test_vuln_fixed.py",
        "func_b": "dangerous_function",
        "struct_sim": 0.5,
        "semantic_sim": 0.7,
        "dynamic_anomaly": false,
        "fusion_score": 0.9230769230769231,
        "score_components": {
          "structural": 0.5,
          "semantic": 0.7,
          "dynamic": false,
          "line_similarity": 0.6666666666666666,
          "token_similarity": 0.9230769230769231,
          "clone_type": "Type 2 (Renamed)",
          "weighted_structural": 0.15,
          "weighted_semantic": 0.35,
          "weighted_dynamic": 0.0
        },
        "explanation": "Clone detected: Classified as Type 2 (Renamed), High syntactic match (0.92)"
      }
    ]
  },
  "summary_statistics": {
    "total_files": 9,
    "total_snippets": 17,
    "total_clone_pairs": 4,
    "total_reports": 4,
    "files_with_anomalies": 0,
    "total_anomalies": 0,
    "average_similarity": 0.925,
    "average_fusion_score": 0.9807692307692308
  },
  "bug_detection": {
    "total_bugs": 7,
    "stats": {
      "total_bugs": 7,
      "by_severity": {
        "critical": 2,
        "high": 4,
        "low": 1
      },
      "by_category": {
        "division_by_zero": 2,
        "bare_except": 2,
        "empty_exception_handler": 2,
        "unused_parameter": 1
      },
      "by_detector": {
        "static_rules": 7
      },
      "files_with_bugs": 3
    },
    "bugs": [
      {
        "file": "samples\\test_vuln.py",
        "function": "safe_function",
        "line": 10,
        "category": "division_by_zero",
        "severity": "critical",
        "message": "Division by zero",
        "evidence": "This will raise ZeroDivisionError at runtime",
        "suggestion": null,
        "detector": "static_rules"
      },
      {
        "file": "samples\\test_vuln_fixed.py",
        "function": "safe_function",
        "line": 11,
        "category": "division_by_zero",
        "severity": "critical",
        "message": "Division by zero",
        "evidence": "This will raise ZeroDivisionError at runtime",
        "suggestion": null,
        "detector": "static_rules"
      },
      {
        "file": "samples\\test_vuln.py",
        "function": "safe_function",
        "line": 11,
        "category": "bare_except",
        "severity": "high",
        "message": "Bare 'except:' clause catches all exceptions including KeyboardInterrupt and SystemExit",
        "evidence": "Use 'except Exception:' or specific exception types",
        "suggestion": "except Exception as e:\n    # Log the error\n    import logging\n    logging.error(e)",
        "detector": "static_rules"
      },
      {
        "file": "samples\\test_vuln.py",
        "function": "safe_function",
        "line": 11,
        "category": "empty_exception_handler",
        "severity": "high",
        "message": "Empty exception handler silently swallows errors",
        "evidence": "Exception is caught but not handled or logged",
        "suggestion": "# Add logging or comment\n    import logging\n    logging.warn('Exception ignored')",
        "detector": "static_rules"
      },
      {
        "file": "samples\\test_vuln_fixed.py",
        "function": "safe_function",
        "line": 12,
        "category": "bare_except",
        "severity": "high",
        "message": "Bare 'except:' clause catches all exceptions including KeyboardInterrupt and SystemExit",
        "evidence": "Use 'except Exception:' or specific exception types",
        "suggestion": "except Exception as e:\n    # Log the error\n    import logging\n    logging.error(e)",
        "detector": "static_rules"
      },
      {
        "file": "samples\\test_vuln_fixed.py",
        "function": "safe_function",
        "line": 12,
        "category": "empty_exception_handler",
        "severity": "high",
        "message": "Empty exception handler silently swallows errors",
        "evidence": "Exception is caught but not handled or logged",
        "suggestion": "# Add logging or comment\n    import logging\n    logging.warn('Exception ignored')",
        "detector": "static_rules"
      },
      {
        "file": "samples\\sample_safe_2.py",
        "function": "maybe_throw",
        "line": 5,
        "category": "unused_parameter",
        "severity": "low",
        "message": "Unused parameter 's' in function 'maybe_throw'",
        "evidence": "Parameter 's' is never used in function body",
        "suggestion": null,
        "detector": "static_rules"
      }
    ]
  }
}